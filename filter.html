
<!DOCTYPE html>
<html>

<head>
    <title>Filter</title>

    <script type="text/javascript"
        src="https://public.tableau.com/javascripts/api/tableau-2.min.js"></script>

    <script type="text/javascript">
        var viz;

        function initViz() {
            var containerDiv = document.getElementById("vizContainer"),
                url = "https://public.tableau.com/views/SP500_weight/stock_weight?:language=en&:display_count=y&publish=yes&:toolbar=n&:origin=viz_share_link",
                options = {
                    "State": "",
                    hideTabs: true
                };
                options = {
                    "Sector": "",
                    hideTabs: true
                };

            viz = new tableau.Viz(containerDiv, url, options);
        }

        function StateFilter(State) {
            var sheet = viz.getWorkbook().getActiveSheet();
            if (State === "") {
                sheet.clearFilterAsync("State");
            } else {
                sheet.applyFilterAsync("State", State, tableau.FilterUpdateType.REPLACE);
            }
        }

        function SectorFilter(Sector) {
            var sheet = viz.getWorkbook().getActiveSheet();
            if (Sector === "") {
                sheet.clearFilterAsync("Sector");
            } else {
                sheet.applyFilterAsync("Sector", Sector, tableau.FilterUpdateType.REPLACE);
            }
        }
    </script>
</head>

<body onload="initViz();">
    <div id="vizContainer" style="width:900px; height:550px;"></div>
    <div id="controls" style="padding:20px;">
        State/Country: <select id="changeState" onchange="StateFilter(value);">
            <option value="">All</option>
            <option value="Bristol">Bristol</option>
            <option value="Ireland">Ireland</option>
            <option value="Pennsylvania">Pennsylvania</option>
            <option value="United Kingdom">United Kingdom</option>
            <option value="Alabama">Alabama</option>
            <option value="Arizona">Arizona</option>
            <option value="Arkansas">Arkansas</option>
            <option value="Bermuda">Bermuda</option>
            <option value="California">California</option>
            <option value="Colorado">Colorado</option>
            <option value="Connecticut">Connecticut</option>
            <option value="D.C.">D.C.</option>
            <option value="Delaware">Delaware</option>
            <option value="Florida">Florida</option>
            <option value="Georgia">Georgia</option>
            <option value="Idaho">Idaho</option>
            <option value="Illinois">Illinois</option>
            <option value="Indiana">Indiana</option>
            <option value="Iowa">Iowa</option>
            <option value="Ireland">Ireland</option>
            <option value="Kentucky">Kentucky</option>
            <option value="Louisiana">Louisiana</option>
            <option value="Maine">Maine</option>
            <option value="Maryland">Maryland</option>
            <option value="Massachusetts">Massachusetts</option>
            <option value="Michigan">Michigan</option>
            <option value="Minnesota">Minnesota</option>
            <option value="Missouri">Missouri</option>
            <option value="Nebraska">Nebraska</option>
            <option value="Netherlands">Netherlands</option>
            <option value="Nevada">Nevada</option>
            <option value="New Jersey">New Jersey</option>
            <option value="New York">New York</option>
            <option value="North Carolina">North Carolina</option>
            <option value="Ohio">Ohio</option>
            <option value="Oklahoma">Oklahoma</option>
            <option value="Oregon">Oregon</option>
            <option value="Pennsylvania">Pennsylvania</option>
            <option value="Rhode Island">Rhode Island</option>
            <option value="Surrey">Surrey</option>
            <option value="Switzerland">Switzerland</option>
            <option value="Tennessee">Tennessee</option>
            <option value="Texas">Texas</option>
            <option value="Utah">Utah</option>
            <option value="Virginia">Virginia</option>
            <option value="Washington">Washington</option>
            <option value="Wisconsin">Wisconsin</option>
        </select>

        Sector: <select id="changeSector" onchange="SectorFilter(value);">
            <option value="">All</option>
            <option value="Communication Services">Communication Services</option>
            <option value="Consumer Discretionary">Consumer Discretionary</option>
            <option value="Consumer Staples">Consumer Staples</option>
            <option value="Energy">Energy</option>
            <option value="Financials">Financials</option>
            <option value="Health Care">Health Care</option>
            <option value="Industrials">Industrials</option>
            <option value="Information Technology">Information Technology</option>
            <option value="Materials">Materials</option>
            <option value="Real Estate">Real Estate</option>
            <option value="Utilities">Utilities</option>
        </select>
    </div>
</body>

</html>